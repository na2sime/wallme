# .gitignore Documentation

Documentation sur ce qui est ignorÃ© et pourquoi.

## ğŸ”’ Fichiers Critiques Ã  Ne JAMAIS Commiter

### Variables d'Environnement
```
.env
.env.local
.env.*.local
.env.development.local
.env.test.local
.env.production.local
```

**Pourquoi ?** Contiennent des secrets (JWT_SECRET, DB passwords, API keys)

**Ã€ commiter :** `.env.example` (template sans secrets)

### Certificats & ClÃ©s
```
*.pem
*.key
*.cert
*.crt
*.p12
*.pfx
id_rsa
id_rsa.pub
*.gpg
```

**Pourquoi ?** Compromettrait la sÃ©curitÃ© de l'application

**Alternative :** Utiliser des secrets managers (AWS Secrets, Vault, etc.)

### Lock Files
```
package-lock.json  # IgnorÃ© (on utilise pnpm)
yarn.lock         # IgnorÃ© (on utilise pnpm)
```

**Ã€ commiter :** `pnpm-lock.yaml` uniquement

## âœ… Fichiers Ã  Commiter

### Configuration
```
âœ… package.json
âœ… pnpm-workspace.yaml
âœ… tsconfig.json
âœ… .eslintrc.json
âœ… .prettierrc
âœ… .env.example (sans secrets)
âœ… docker-compose.yml
âœ… Dockerfile
```

### Code Source
```
âœ… src/**/*.ts
âœ… src/**/*.tsx
âœ… scripts/*.sql
âœ… scripts/*.sh
```

### Documentation
```
âœ… README.md
âœ… QUICKSTART.md
âœ… CLAUDE.md
âœ… CONTRIBUTING.md
âœ… etc.
```

### Configuration IDE (optionnel)
```
âœ… .vscode/settings.json (partagÃ©)
âœ… .vscode/extensions.json (recommandations)
âŒ .vscode/workspace.json (personnel)
âŒ .idea/ (JetBrains - trop volumineux)
```

## ğŸ”„ Fichiers GÃ©nÃ©rÃ©s (IgnorÃ©s)

### Build Outputs
```
dist/
build/
.next/
*.tsbuildinfo
```

**Pourquoi ?** RÃ©gÃ©nÃ©rÃ©s Ã  chaque build, alourdissent le repo

### Dependencies
```
node_modules/
```

**Pourquoi ?** InstallÃ©s via `pnpm install`, peuvent faire plusieurs Go

### Caches
```
.turbo/
.eslintcache
.prettiercache
```

**Pourquoi ?** Fichiers temporaires de performance

## ğŸ—„ï¸ Fichiers de DonnÃ©es (IgnorÃ©s)

### Database Dumps
```
*.dump
*.sql.gz
dump.rdb
```

**Pourquoi ?** DonnÃ©es de dÃ©veloppement/test, trop volumineux

**Exception :** Seed files ou migrations peuvent Ãªtre commitÃ©s

### Logs
```
*.log
logs/
```

**Pourquoi ?** Fichiers temporaires, peuvent Ãªtre Ã©normes

## ğŸ“ Commandes Utiles

### VÃ©rifier les fichiers ignorÃ©s
```bash
git status --ignored
```

### Voir ce qui serait ignorÃ©
```bash
git check-ignore -v *
```

### Forcer l'ajout d'un fichier ignorÃ©
```bash
git add -f fichier.txt
```

### Supprimer un fichier dÃ©jÃ  trackÃ©
```bash
# Le supprimer du repo mais le garder localement
git rm --cached fichier.txt

# Commit
git commit -m "Remove sensitive file from repo"
```

### Nettoyer les fichiers ignorÃ©s
```bash
# Voir ce qui serait supprimÃ©
git clean -ndX

# Supprimer (ATTENTION: irrÃ©versible)
git clean -fdX
```

## ğŸš¨ Si Vous Avez CommitÃ© un Secret

### 1. Supprimer du dernier commit
```bash
git rm --cached .env
git commit --amend
git push --force
```

### 2. Supprimer de l'historique complet
```bash
# Utiliser BFG Repo-Cleaner
brew install bfg
bfg --delete-files .env
git reflog expire --expire=now --all
git gc --prune=now --aggressive
git push --force
```

### 3. RÃ©voquer les secrets
- âš ï¸ Changer le JWT_SECRET
- âš ï¸ Changer les passwords DB
- âš ï¸ RÃ©voquer les API keys
- âš ï¸ Notifier l'Ã©quipe

## ğŸ“Š Taille du Repo

### VÃ©rifier la taille
```bash
git count-objects -vH
```

### Fichiers les plus volumineux
```bash
git rev-list --objects --all | \
  git cat-file --batch-check='%(objecttype) %(objectname) %(objectsize) %(rest)' | \
  sed -n 's/^blob //p' | \
  sort --numeric-sort --key=2 --reverse | \
  head -20
```

## ğŸ¯ Best Practices

### âœ… Ã€ Faire
- Commiter souvent, petits commits
- Messages de commit clairs
- Utiliser `.env.example` pour documenter les variables
- VÃ©rifier `git status` avant de commit
- Review les changements avec `git diff`

### âŒ Ã€ Ã‰viter
- Commiter des secrets
- Commiter `node_modules/`
- Commiter des builds
- Commiter des fichiers personnels (`.vscode/workspace`)
- Commiter des logs
- Force push sur `main` sans raison

## ğŸ” Configuration SpÃ©cifique au Projet

### Fichiers IgnorÃ©s SpÃ©cifiques Ã  WallMe
```
# Redis dumps
dump.rdb

# PostgreSQL dumps locaux
*.dump

# Scripts de dev personnel
dev.local.sh
```

### Fichiers Ã  Commiter SpÃ©cifiques
```
# Scripts d'initialisation
scripts/init.sql

# Configuration Docker
docker-compose.yml
services/*/Dockerfile

# Scripts de setup
setup.sh
dev.sh
```

## ğŸ“š Ressources

- [GitHub .gitignore templates](https://github.com/github/gitignore)
- [gitignore.io](https://www.toptal.com/developers/gitignore)
- [Git Documentation](https://git-scm.com/docs/gitignore)

---

**En cas de doute, ne commitez pas !** Il vaut mieux demander que de commiter un secret.